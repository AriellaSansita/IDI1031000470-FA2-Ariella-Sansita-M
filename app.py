import streamlit as st
import google.generativeai as genai
import os

# ЁЯФР Configure Gemini API
genai.configure(api_key=os.getenv("GEMINI_API_KEY"))
model = genai.GenerativeModel("gemini-2.5-flash")

# --- ЁЯЪА The Full Multilingual Dictionary ---
translations = {
    "English": {
        "title": "ЁЯМ▒ Smart Farming Assistant",
        "loc": "Enter location",
        "stage": "Crop stage",
        "stages": ["Planting", "Growing", "Harvesting"],
        "const": "Constraints (e.g. Organic)",
        "ask": "Your farming question",
        "btn": "Get Advice",
        "header": "Farming Advice",
        "error": "Please enter a question."
    },
    "Hindi (рд╣рд┐рдиреНрджреА)": {
        "title": "ЁЯМ▒ рд╕реНрдорд╛рд░реНрдЯ рдЦреЗрддреА рд╕рд╣рд╛рдпрдХ",
        "loc": "рд╕реНрдерд╛рди рджрд░реНрдЬ рдХрд░реЗрдВ",
        "stage": "рдлрд╕рд▓ рдХрд╛ рдЪрд░рдг",
        "stages": ["рдмреБрд╡рд╛рдИ", "рдмрдврд╝рдд", "рдХрдЯрд╛рдИ"],
        "const": "рд╕реАрдорд╛рдПрдВ (рдЬреИрд╕реЗ: рдЬреИрд╡рд┐рдХ)",
        "ask": "рдЕрдкрдирд╛ рдкреНрд░рд╢реНрди рдкреВрдЫреЗрдВ",
        "btn": "рд╕рд▓рд╛рд╣ рд▓реЗрдВ",
        "header": "рдЦреЗрддреА рдХреА рд╕рд▓рд╛рд╣",
        "error": "рдХреГрдкрдпрд╛ рдкреНрд░рд╢реНрди рджрд░реНрдЬ рдХрд░реЗрдВред"
    },
    "Bengali (ржмрж╛ржВрж▓рж╛)": {
        "title": "ЁЯМ▒ рж╕рзНржорж╛рж░рзНржЯ ржлрж╛рж░рзНржорж┐ржВ рж╕рж╣ржХрж╛рж░рзА",
        "loc": "ржЕржмрж╕рзНржерж╛ржи рж▓рж┐ржЦрзБржи",
        "stage": "ржлрж╕рж▓рзЗрж░ ржкрж░рзНржпрж╛ржпрж╝",
        "stages": ["рж░рзЛржкржг", "ржмрзГржжрзНржзрж┐", "ржХрж╛ржЯрж╛"],
        "const": "рж╕рзАржорж╛ржмржжрзНржзрждрж╛ (ржпрзЗржоржи: ржЬрзИржм)",
        "ask": "ржЖржкржирж╛рж░ ржкрзНрж░рж╢рзНржи рж▓рж┐ржЦрзБржи",
        "btn": "ржкрж░рж╛ржорж░рзНрж╢ ржирж┐ржи",
        "header": "ржХрзГрж╖рж┐ ржкрж░рж╛ржорж░рзНрж╢",
        "error": "ржПржХржЯрж┐ ржкрзНрж░рж╢рзНржи рж▓рж┐ржЦрзБржиред"
    },
    "Telugu (р░др▒Жр░▓р▒Бр░Чр▒Б)": {
        "title": "ЁЯМ▒ р░╕р▒Нр░ор░╛р░░р▒Нр░Яр▒Н р░лр░╛р░░р▒Нр░ор░┐р░Вр░Чр▒Н р░Ер░╕р░┐р░╕р▒Нр░Яр▒Жр░Вр░Яр▒Н",
        "loc": "р░кр▒Нр░░р░╛р░Вр░др░В",
        "stage": "р░кр░Вр░Я р░жр░╢",
        "stages": ["р░ир░╛р░Яр░бр░В", "р░кр▒Жр░░р▒Бр░Чр▒Бр░жр░▓", "р░Хр▒Лр░д"],
        "const": "р░кр░░р░┐р░ор░┐р░др▒Бр░▓р▒Б",
        "ask": "р░ор▒А р░кр▒Нр░░р░╢р▒Нр░и",
        "btn": "р░╕р░▓р░╣р░╛ р░кр▒Кр░Вр░жр░Вр░бр░┐",
        "header": "р░╡р▒Нр░пр░╡р░╕р░╛р░п р░╕р░▓р░╣р░╛",
        "error": "р░кр▒Нр░░р░╢р▒Нр░ир░ир▒Б р░ир░ор▒Лр░жр▒Б р░Ър▒Зр░пр░Вр░бр░┐."
    },
    "Marathi (рдорд░рд╛рдареА)": {
        "title": "ЁЯМ▒ рд╕реНрдорд╛рд░реНрдЯ рд╢реЗрддреА рд╕рд╣рд╛рдпреНрдпрдХ",
        "loc": "рдард┐рдХрд╛рдг рдЯрд╛рдХрд╛",
        "stage": "рдкрд┐рдХрд╛рдЪреА рдЕрд╡рд╕реНрдерд╛",
        "stages": ["рд▓рд╛рдЧрд╡рдб", "рд╡рд╛рдв", "рдХрд╛рдврдгреА"],
        "const": "рдорд░реНрдпрд╛рджрд╛",
        "ask": "рддреБрдордЪрд╛ рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛",
        "btn": "рд╕рд▓реНрд▓рд╛ рдорд┐рд│рд╡рд╛",
        "header": "рд╢реЗрддреА рд╕рд▓реНрд▓рд╛",
        "error": "рдкреНрд░рд╢реНрди рдкреНрд░рд╡рд┐рд╖реНрдЯ рдХрд░рд╛."
    },
    "Tamil (родрооро┐ро┤рпН)": {
        "title": "ЁЯМ▒ ро╕рпНрооро╛ро░рпНроЯрпН ро╡ро┐ро╡роЪро╛роп роЙродро╡ро┐ропро╛ро│ро░рпН",
        "loc": "роЗро░рпБрокрпНрокро┐роЯроорпН",
        "stage": "рокропро┐ро░рпН роиро┐ро▓рпИ",
        "stages": ["роироЯро╡рпБ", "ро╡ро│ро░рпНроЪрпНроЪро┐", "роЕро▒рпБро╡роЯрпИ"],
        "const": "роХроЯрпНроЯрпБрокрпНрокро╛роЯрпБроХро│рпН",
        "ask": "роХрпЗро│рпНро╡ро┐ропрпИроХрпН роХрпЗро│рпБроЩрпНроХро│рпН",
        "btn": "роЖро▓рпЛроЪройрпИ рокрпЖро▒рпБ",
        "header": "ро╡ро┐ро╡роЪро╛роп роЖро▓рпЛроЪройрпИ",
        "error": "роХрпЗро│рпНро╡ро┐ропрпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН."
    },
    "Urdu (╪з╪▒╪п┘И)": {
        "title": "ЁЯМ▒ ╪│┘Е╪з╪▒┘╣ ┘Б╪з╪▒┘Е┘Ж┌п ╪з╪│╪│┘╣┘Ж┘╣",
        "loc": "┘Е┘В╪з┘Е",
        "stage": "┘Б╪╡┘Д ┌й╪з ┘Е╪▒╪н┘Д█Б",
        "stages": ["┌й╪з╪┤╪к", "┘Ж╪┤┘И┘И┘Ж┘Е╪з", "┌й┘╣╪з╪ж█М"],
        "const": "┘╛╪з╪и┘Ж╪п█М╪з┌║",
        "ask": "╪│┘И╪з┘Д ┘╛┘И┌Ж┌╛█М┌║",
        "btn": "┘Е╪┤┘И╪▒█Б ┘Д█М┌║",
        "header": "╪▓╪▒╪╣█М ┘Е╪┤┘И╪▒█Б",
        "error": "╪│┘И╪з┘Д ╪п╪▒╪м ┌й╪▒█М┌║█Ф"
    },
    "Gujarati (ркЧрлБркЬрк░рк╛ркдрлА)": {
        "title": "ЁЯМ▒ рк╕рлНркорк╛рк░рлНркЯ рклрк╛рк░рлНркорк┐ркВркЧ рк╕рк╣рк╛ркпркХ",
        "loc": "рк╕рлНркерк╛рки",
        "stage": "рккрк╛ркХркирлЛ ркдркмркХрлНркХрлЛ",
        "stages": ["рк╡рк╛рк╡ркгрлА", "рк╡рк┐ркХрк╛рк╕", "рк▓ркгркгрлА"],
        "const": "ркорк░рлНркпрк╛ркжрк╛ркУ",
        "ask": "рккрлНрк░рк╢рлНрки рккрлВркЫрлЛ",
        "btn": "рк╕рк▓рк╛рк╣ ркорлЗрк│рк╡рлЛ",
        "header": "ркЦрлЗркдрлА рк╕рк▓рк╛рк╣",
        "error": "рккрлНрк░рк╢рлНрки ркжрк╛ркЦрк▓ ркХрк░рлЛ."
    },
    "Kannada (р▓Хр▓ир│Нр▓ир▓б)": {
        "title": "ЁЯМ▒ р▓╕р│Нр▓ор▓╛р▓░р│Нр▓Яр│Н р▓Хр│Гр▓╖р▓┐ р▓╕р▓╣р▓╛р▓пр▓Х",
        "loc": "р▓╕р│Нр▓ер▓│",
        "stage": "р▓мр│Жр▓│р│Ж р▓╣р▓Вр▓д",
        "stages": ["р▓мр▓┐р▓др│Нр▓др▓ир│Ж", "р▓мр│Жр▓│р▓╡р▓гр▓┐р▓Чр│Ж", "р▓Хр▓Яр▓╛р▓╡р│Б"],
        "const": "р▓ор▓┐р▓др▓┐р▓Чр▓│р│Б",
        "ask": "р▓кр│Нр▓░р▓╢р│Нр▓ир│Ж р▓Хр│Зр▓│р▓┐",
        "btn": "р▓╕р▓▓р▓╣р│Ж р▓кр▓бр│Жр▓пр▓┐р▓░р▓┐",
        "header": "р▓Хр│Гр▓╖р▓┐ р▓╕р▓▓р▓╣р│Ж",
        "error": "р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓пр▓ир│Нр▓ир│Б р▓ир▓ор│Вр▓жр▓┐р▓╕р▓┐."
    },
    "Odia (рмУрмбрм╝рм┐рмЖ)": {
        "title": "ЁЯМ▒ рм╕рнНрморм╛рм░рнНрмЯ рмХрнГрм╖рм┐ рм╕рм╣рм╛рнЯрмХ",
        "loc": "рм╕рнНрмерм╛рми",
        "stage": "рмкрм░рнНрмпрнНрнЯрм╛рнЯ",
        "stages": ["рммрнБрмгрм┐рммрм╛", "рммрмврм┐рммрм╛", "рмЕрморм│"],
        "const": "рмкрнНрм░рмдрм┐рммрмирнНрмзрмХ",
        "ask": "рмкрнНрм░рм╢рнНрми рмкрмЪрм╛рм░рмирнНрмдрнБ",
        "btn": "рмкрм░рм╛рморм░рнНрм╢",
        "header": "рмХрнГрм╖рм┐ рмкрм░рм╛рморм░рнНрм╢",
        "error": "рмкрнНрм░рм╢рнНрми рм▓рнЗрмЦрмирнНрмдрнБ."
    },
    "Malayalam (р┤ор┤▓р┤пр┤╛р┤│р┤В)": {
        "title": "ЁЯМ▒ р┤╕р╡Нр┤ор┤╛р╡╝р┤Яр╡Нр┤Яр╡Н р┤лр┤╛р┤ор┤┐р┤Вр┤Чр╡Н р┤Ер┤╕р┤┐р┤╕р╡Нр┤▒р╡Нр┤▒р┤ир╡Нр┤▒р╡Н",
        "loc": "р┤╕р╡Нр┤ер┤▓р┤В",
        "stage": "р┤Шр┤Яр╡Нр┤Яр┤В",
        "stages": ["р┤ир┤Яр╡Ар╡╜", "р┤╡р┤│р╡╝р┤Ър╡Нр┤Ъ", "р┤╡р┤┐р┤│р┤╡р╡Жр┤Яр╡Бр┤кр╡Нр┤кр╡Н"],
        "const": "р┤кр┤░р┤┐р┤ор┤┐р┤др┤┐р┤Хр╡╛",
        "ask": "р┤Ър╡Лр┤жр╡Нр┤пр┤В р┤Ър╡Лр┤жр┤┐р┤Хр╡Нр┤Хр╡Бр┤Х",
        "btn": "р┤Йр┤кр┤жр╡Зр┤╢р┤В р┤др╡Зр┤Яр╡Бр┤Х",
        "header": "р┤Хр┤╛р╡╝р┤╖р┤┐р┤Х р┤Йр┤кр┤жр╡Зр┤╢р┤В",
        "error": "р┤Ър╡Лр┤жр╡Нр┤пр┤В р┤ир╡╜р┤Хр╡Бр┤Х."
    },
    "Punjabi (рикрй░риЬри╛римрйА)": {
        "title": "ЁЯМ▒ ри╕риори╛ри░риЯ риЦрйЗридрйА ри╕ри╣ри╛риЗриХ",
        "loc": "ри╕риери╛рии",
        "stage": "рикрйЬри╛риЕ",
        "stages": ["римри┐риЬри╛риИ", "ри╡ри╛ризри╛", "риХриЯри╛риИ"],
        "const": "рикри╛римрй░рижрйАриЖриВ",
        "ask": "ри╕ри╡ри╛ри▓ рикрйБрй▒риЫрйЛ",
        "btn": "ри╕ри▓ри╛ри╣ ри▓риУ",
        "header": "риЦрйЗридрйА ри╕ри▓ри╛ри╣",
        "error": "ри╕ри╡ри╛ри▓ рижри░риЬ риХри░рйЛред"
    },
    "Assamese (ржЕрж╕ржорзАржпрж╝рж╛)": {
        "title": "ЁЯМ▒ рж╕рзНржорж╛рз░рзНржЯ ржХрзГрж╖рж┐ рж╕рж╣рж╛ржпрж╝ржХ",
        "loc": "рж╕рзНржерж╛ржи",
        "stage": "ржкрз░рзНржпрж╛рзЯ",
        "stages": ["рз░рзЛржкржг", "ржмрзГржжрзНржзрж┐", "ржЪржкрзЛрз▒рж╛"],
        "const": "рж╕рзАржорж╛ржмржжрзНржзрждрж╛",
        "ask": "ржкрзНрз░рж╢рзНржи рж╕рзЛржзржХ",
        "btn": "ржкрз░рж╛ржорз░рзНрж╢",
        "header": "ржХрзГрж╖рж┐ ржкрз░рж╛ржорз░рзНрж╢",
        "error": "ржкрзНрз░рж╢рзНржи рж▓рж┐ржЦржХред"
    },
    "Maithili (рдореИрдерд┐рд▓реА)": {
        "title": "ЁЯМ▒ рд╕реНрдорд╛рд░реНрдЯ рдХреГрд╖рд┐ рд╕рд╣рд╛рдпрдХ",
        "loc": "рд╕реНрдерд╛рди",
        "stage": "рдЪрд░рдг",
        "stages": ["рд░реЛрдкрдиреА", "рд╡рд┐рдХрд╛рд╕", "рдХрдЯрдиреА"],
        "const": "рд╕реАрдорд╛",
        "ask": "рдкреНрд░рд╢реНрди рдкреВрдЫреВ",
        "btn": "рд╕рд▓рд╛рд╣ рд▓рд┐рдЕ",
        "header": "рдХреГрд╖рд┐ рд╕рд▓рд╛рд╣",
        "error": "рдкреНрд░рд╢реНрди рд▓рд┐рдЦреВред"
    },
    "Santali (с▒ес▒Яс▒▒с▒Ыс▒Яс▒▓с▒д)": {
        "title": "ЁЯМ▒ с▒ес▒вс▒Яс▒ис▒┤ с▒кс▒Яс▒е с▒Ьс▒Ъс▒▓с▒Ъс▒нс▒дс▒б",
        "loc": "с▒бс▒Яс▒нс▒Ьс▒Я",
        "stage": "с▒Ъс▒ас▒Ыс▒Ъ",
        "stages": ["с▒ис▒Ъс▒жс▒Ъс▒н", "с▒жс▒Яс▒ис▒Яс▒Ь", "с▒дс▒и"],
        "const": "с▒╡с▒Яс▒лс▒╖с▒Я",
        "ask": "с▒ас▒йс▒Юс▒дс▒нс▒Яс▒в",
        "btn": "с▒╡с▒йс▒лс▒╖с▒д",
        "header": "с▒кс▒Яс▒е с▒╡с▒йс▒лс▒╖с▒д",
        "error": "с▒ас▒йс▒ас▒Юс▒д с▒Ъс▒Ю с▒вс▒о"
    },
    "Kashmiri (┌й┘▓╪┤┘П╪▒)": {
        "title": "ЁЯМ▒ ╪│┘Е╪з╪▒┘╣ ┌й┘▓╪┤╪к█М ┘Е╪п╪п┌п╪з╪▒",
        "loc": "╪м╪з╪ж█Т",
        "stage": "╪н╪з┘Д╪к",
        "stages": ["╪к╪о┘Е ╪▒█М╪▓█М", "╪и█Ж┌И ┌п┌Ш┌╛┘П┘Ж", "┘Д█Ж┘Ж┘П┘Ж"],
        "const": "╪▒┘П┌й╪з┘И┘╣",
        "ask": "╪│┘И╪з┘Д ┘╛┘П╪▒┌Ш┌╛█М┘И",
        "btn": "┘Е╪┤┘И╪▒█Б",
        "header": "┌й┘▓╪┤╪к█М ┘Е╪┤┘И╪▒┘Х",
        "error": "╪│┘И╪з┘Д ╪п╪▒╪м ┌й┘Ф╪▒█М┘И"
    },
    "Nepali (рдиреЗрдкрд╛рд▓реА)": {
        "title": "ЁЯМ▒ рд╕реНрдорд╛рд░реНрдЯ рдХреГрд╖рд┐ рд╕рд╣рд╛рдпрдХ",
        "loc": "рд╕реНрдерд╛рди",
        "stage": "рдЕрд╡рд╕реНрдерд╛",
        "stages": ["рд░реЛрдкрдг", "рд╡реГрджреНрдзрд┐", "рдХрдЯрд╛рдиреА"],
        "const": "рд╕реАрдорд╛рд╣рд░реВ",
        "ask": "рдкреНрд░рд╢реНрди рд╕реЛрдзреНрдиреБрд╣реЛрд╕реН",
        "btn": "рд╕рд▓реНрд▓рд╛рд╣ рд▓рд┐рдиреБрд╣реЛрд╕реН",
        "header": "рдХреГрд╖рд┐ рд╕рд▓реНрд▓рд╛рд╣",
        "error": "рдкреНрд░рд╢реНрди рд▓реЗрдЦреНрдиреБрд╣реЛрд╕реНред"
    },
    "Konkani (рдХреЛрдВрдХрдгреА)": {
        "title": "ЁЯМ▒ рд╕реНрдорд╛рд░реНрдЯ рд╢реЗрддреА рд╕рд╣рд╛рдпреНрдпрдХ",
        "loc": "рд╕реБрд╡рд╛рдд",
        "stage": "рдЕрд╡рд╕реНрдерд╛",
        "stages": ["рд▓рд╛рд╡рдб", "рд╡рд╛рдв", "рдХрд╛рдврдгреА"],
        "const": "рдорд░реНрдпрд╛рджрд╛",
        "ask": "рдкреНрд░рд╢реНрди рд╡рд┐рдЪрд╛рд░рд╛рдд",
        "btn": "рд╕рд▓реНрд▓реЛ",
        "header": "рд╢реЗрддреА рд╕рд▓реНрд▓реЛ",
        "error": "рдкреНрд░рд╢реНрди рдмрд░рдпрд╛рдд."
    },
    "Sindhi (╪│┘Ж┌М┘К)": {
        "title": "ЁЯМ▒ ╪│┘Е╪з╪▒┘╜ ┘Б╪з╪▒┘Е┘Ж┌п ┘Е╪п╪п┌п╪з╪▒",
        "loc": "╪м┌│┘З┘З",
        "stage": "┘Е╪▒╪н┘Д┘И",
        "stages": ["┘╛┘И┘И┌й┘К", "┘И╪з┌М", "┘Д┘И┌П╪з"],
        "const": "╪▒┌к╪з┘И┘╜┘И┘Ж",
        "ask": "╪│┘И╪з┘Д ┘╛┌З┘И",
        "btn": "╪╡┘Д╪з╪н ┘И┘║┘И",
        "header": "╪▓╪▒╪з╪╣╪к ╪м┘К ╪╡┘Д╪з╪н",
        "error": "╪│┘И╪з┘Д ╪п╪з╪о┘Д ┌к╪▒┘К┘И."
    },
    "Dogri (рдбреЛрдЧрд░реА)": {
        "title": "ЁЯМ▒ рд╕реНрдорд╛рд░реНрдЯ рдЦреЗрддреА рд╕рд╣рд╛рдпрдХ",
        "loc": "рдерд╛рд╣рдВ",
        "stage": "рдЪрд░рдг",
        "stages": ["рдмрд┐рдЬрд╛рдИ", "рдмрдзрд╛рдИ", "рдХрдЯрд╛рдИ"],
        "const": "рд░реБрдХрд╛рд╡рдЯ",
        "ask": "рд╕реБрдЖрд▓ рдкреБрдЪреНрдЫреЛ",
        "btn": "рд╕рд▓рд╛рд╣",
        "header": "рдЦреЗрддреА рд╕рд▓рд╛рд╣",
        "error": "рд╕реБрдЖрд▓ рд▓рд┐рдЦреЛред"
    },
    "Manipuri (ржорзИрждрзИрж▓рзЛржи)": {
        "title": "ЁЯМ▒ рж╕рзНржорж╛рж░рзНржд ржлрж╛рж░ржорж┐ржВ ржПрж╕рж┐рж╕рзНрждрзЗржирзНржд",
        "loc": "ржоржлржо",
        "stage": "ржкрж░рзНржпрж╛рзЯ",
        "stages": ["ржерж╛ржмрж╛", "ржЪрж╛ржЙржЦрзОржкрж╛", "рж▓рзЛржЙржмрж╛"],
        "const": "ржЕрзЯрзЗрзОржкрж╛",
        "ask": "рз▒рж╛рж╣ржВ рж╣ржВржмрзАржпрж╝рзБ",
        "btn": "ржкрж╛ржЙрждрж╛ржХ рж▓рзМржмрзАржпрж╝рзБ",
        "header": "рж▓рзМржорзАржЧрзА ржкрж╛ржЙрждрж╛ржХ",
        "error": "рз▒рж╛рж╣ржВ ржЕржорж╛ ржЗржмрзАржпрж╝рзБред"
    },
    "Bodo (рдмрд░')": {
        "title": "ЁЯМ▒ рд╕реНрдорд╛рд░реНрдЯ рдЖрдмрд╛рдж рдЕрдирдерд╛рдпрдЧреНрд░рд╛",
        "loc": "рдЬрд╛рдпрдЧрд╛",
        "stage": "рдЖрдмрд╛рджрдирд┐ рдерд╛рдЦреЛ",
        "stages": ["рдЧрд╛рдпрдирд╛рдп", "рджреЗрд░рдирд╛рдп", "рд╣рд╛рдЦрд╛рдпрдирд╛рдп"],
        "const": "рд╣реЗрдВрдерд╛",
        "ask": "рд╕реЛрдВрд▓реБ рд╕реЛрдВ",
        "btn": "рд╕реБрдмреБрдВрдерд┐ рд▓рд╛рдп",
        "header": "рдЖрдмрд╛рдж рд╕реБрдмреБрдВрдерд┐",
        "error": "рд╕реЛрдВрд▓реБ рд▓рд┐рд░ред"
    },
    "Sanskrit (рд╕рдВрд╕реНрдХреГрддрдореН)": {
        "title": "ЁЯМ▒ рдЪрддреБрд░ рдХреГрд╖рд┐ рд╕рд╣рд╛рдпрдХ:",
        "loc": "рд╕реНрдерд╛рдирдореН",
        "stage": "рдЕрд╡рд╕реНрдерд╛",
        "stages": ["рд╡рдкрдирдореН", "рд╡рд░реНрдзрдирдореН", "рд▓рд╡рдирдореН"],
        "const": "рдкреНрд░рддрд┐рдмрдиреНрдзрд╛:",
        "ask": "рдкреНрд░рд╢реНрдирдВ рдкреГрдЪреНрдЫрддреБ",
        "btn": "рдкрд░рд╛рдорд░реНрд╢рдВ рдкреНрд░рд╛рдкреНрдиреБрд╣рд┐",
        "header": "рдХреГрд╖рд┐ рдкрд░рд╛рдорд░реНрд╢:",
        "error": "рдХреГрдкрдпрд╛ рдкреНрд░рд╢реНрдирдВ рд▓рд┐рдЦрддреБред"
    }
}

# --- ЁЯЫая╕П Logic ---
st.set_page_config(page_title="Smart Farming Assistant", layout="centered")

# Dropdown list from our dictionary
available_languages = list(translations.keys())
selected_lang_full = st.sidebar.selectbox("ЁЯМР Select Language / рднрд╛рд╖рд╛ рдЪреБрдиреЗрдВ", available_languages)

# Get current labels
ui = translations[selected_lang_full]

# --- ЁЯЦея╕П Interface ---
st.title(ui["title"])

col1, col2 = st.columns(2)
with col1:
    location = st.text_input(ui["loc"])
with col2:
    crop_stage = st.selectbox(ui["stage"], ui["stages"])

constraints = st.text_input(ui["const"])
query = st.text_area(ui["ask"])

if st.button(ui["btn"]):
    if query.strip():
        # Clean language name for Gemini (removes the script in brackets)
        clean_lang = selected_lang_full.split(" (")[0]
        
        prompt = (
            f"Farming consultation for {location}. Stage: {crop_stage}. Constraints: {constraints}. "
            f"Farmer's question: {query}. "
            f"Respond with 3-5 simple, actionable points in {clean_lang} language."
        )
        
        with st.spinner("..."):
            response = model.generate_content(prompt)
            
        st.divider()
        st.subheader(ui["header"])
        st.write(response.text)
    else:
        st.error(ui["error"])
